<div class="grid">
  <div class="col-12">
    <p-toolbar>
      <ng-template #start>
        <p-button
          label="Добавить"
          [outlined]="true"
          (onClick)="onAddButtonClick()"></p-button>
      </ng-template>
    </p-toolbar>
  </div>
  <div class="col-12">
    <p-table
      showGridlines
      [tableStyle]="{ 'min-width': '50rem' }"
      [value]="(documentService.registeredDocuments$ | async) ?? []"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[5, 10, 20]">
      <ng-template pTemplate="header">
        <tr>
          <th>Регистрационный номер</th>
          <th>Дата рег</th>
          <th>Способ доставки</th>
          <th>Корреспондент</th>
          <th>Тема</th>
          <th>Доступ</th>
          <th>Контроль</th>
          <th>Документ</th>
          <th>Действия</th>
        </tr>
      </ng-template>
      <ng-template
        pTemplate="body"
        let-document
        let-columns="columns">
        <tr>
          <td>{{ document.regNumber }}</td>
          <td>{{ document.regDate | date : 'mediumDate' }}</td>
          <td>{{ document.deliveryMethod }}</td>
          <td>{{ document.correspondent }}</td>
          <td>{{ document.topic }}</td>
          <td>{{ document.access | yesNo }}</td>
          <td>{{ document.control | yesNo }}</td>
          <td>
            @if(document.file){
            <p-button
              fluid="true"
              icon="pi pi-download"
              (onClick)="saveButton(document.file)" />
            } @else { Документа нет }
          </td>
          <td class="flex gap-2">
            <p-button
              pTooltip="Изменить"
              icon="pi pi-pencil"
              (onClick)="onEditButtonClick(document)"
              severity="warn"></p-button>
            <p-button
              pTooltip="Удалить"
              (onClick)="onDelete(document)"
              icon="pi pi-trash"
              severity="danger"></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
@if (editFormVisible) {
<app-document-registration-form
  [(visible)]="editFormVisible"
  [editItem]="editItem"
  (closed)="
    editFormVisible = false; editItem = undefined
  "></app-document-registration-form>
}
